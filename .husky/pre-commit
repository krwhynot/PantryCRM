#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks according to PantryCRM git workflow..."

# Run TypeScript type checking
echo "ğŸ“ Running TypeScript check..."
npm run typecheck || { echo "âŒ TypeScript check failed. Please fix the issues before committing."; exit 1; }

# Verify changes work if applicable
if [ -f "package.json" ]; then
  if grep -q "\"build\":\" "package.json"; then
    echo "ğŸ—ï¸ Running build check..."
    npm run build || { echo "âŒ Build failed. Please fix the issues before committing."; exit 1; }
  fi
fi

echo "âœ… Pre-commit checks passed successfully!"
