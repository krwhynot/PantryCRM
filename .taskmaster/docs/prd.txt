# Product Requirements Document: Food Service CRM

## 1. Introduction
   - **Project Name:** Food Service CRM
   - **Goal:** Develop a modern, web-based Customer Relationship Management (CRM) system tailored for the food service industry. This system will replace an existing Excel-based solution, offering improved efficiency, data management, and reporting capabilities. A primary focus is optimization for iPad use by field sales representatives.
   - **Target Users:** 4 sales representatives.
   - **Timeline:** 8-week implementation.

## 2. Key Features (Phased Approach)

### Phase 1: Foundation Setup (Weeks 1-2) - Target: COMPLETE
   - **F1.1:** Set up NextCRM foundation repository (Next.js 15, TypeScript, Prisma, shadcn/ui, Tremor charts).
   - **F1.2:** Configure Azure SQL Database (Basic Tier) and integrate with Prisma ORM (SQL Server provider).
   - **F1.3:** Implement basic UI framework using shadcn/ui and establish structure for Tremor chart integration.
   - **F1.4:** Set up core authentication using Auth.js (Email/Password provider).
   - **F1.5:** Establish Jest and React Testing Library environment for unit and integration tests. Ensure iPad touch target compliance (44px) can be tested.
   - **F1.6:** Configure initial CI/CD pipeline with GitHub Actions for deployment to Azure App Service (Node.js runtime).
   - **F1.7:** Implement a development-mode authentication bypass mechanism to facilitate easier testing of core CRM features.

### Phase 2: Core CRM Functionality (Weeks 3-4) - Target: CURRENT
   - **C1.1: Organization Management**
      - C1.1.1: CRUD (Create, Read, Update, Delete) operations for organizations.
      - C1.1.2: View for organization details (name, address, priority, segment, distributor, notes, assigned account manager).
      - C1.1.3: List view with search and filtering capabilities for organizations.
      - C1.1.4: UI optimized for iPad data entry (44px touch targets).
   - **C1.2: Contact Management**
      - C1.2.1: CRUD operations for contacts.
      - C1.2.2: Ability to link contacts to organizations (one-to-many from Organization).
      - C1.2.3: Fields for contact details (name, role, email, phone, primary contact flag).
      - C1.2.4: UI optimized for iPad data entry.
   - **C1.3: Interaction Logging**
      - C1.3.1: CRUD operations for interactions.
      - C1.3.2: Ability to link interactions to organizations and/or contacts.
      - C1.3.3: Fields for interaction details (type, date, notes, follow-up date).
      - C1.3.4: UI optimized for iPad data entry.
   - **C1.4: Dynamic Settings Management**
      - C1.4.1: Admin interface to manage configurable dropdown values for:
         - Priority levels (A, B, C, D with color coding: A=Green, B=Yellow, C=Orange, D=Red).
         - Market Segments (e.g., Fine Dining, Fast Food, Healthcare).
         - Distributors (e.g., Sysco, USF, PFG).
         - Contact Roles (e.g., Exec Chef, Buyer).
         - Interaction Types (e.g., Email, Call, In Person).
         - Principals (e.g., Kaufholds, Frites Street).
      - C1.4.2: Ensure these settings are dynamically used in relevant forms and filters.

### Phase 3: Pipeline & Reporting (Weeks 5-6)
   - **P1.1: Sales Pipeline Management**
      - P1.1.1: Define and manage pipeline stages (Lead-discovery → Contacted → Sampled/Visited → Follow-up → Close).
      - P1.1.2: Visual representation of organizations/opportunities within pipeline stages (e.g., Kanban board).
      - P1.1.3: Ability to move items between stages.
   - **P1.2: Opportunity Tracking**
      - P1.2.1: CRUD operations for sales opportunities.
      - P1.2.2: Link opportunities to organizations and contacts.
      - P1.2.3: Fields for opportunity details (value, expected close date, products, notes).
   - **P1.3: Reporting Dashboard**
      - P1.3.1: Display key metrics (e.g., total organizations, new contacts, recent interactions, pipeline value).
      - P1.3.2: Integrate Tremor charts for visualizing:
         - Sales performance over time.
         - Activity reports by sales representative.
         - Pipeline stage distribution.
      - P1.3.3: Basic filtering for dashboard data (e.g., by date range, by sales rep).
   - **P1.4: Advanced Search & Filtering**
      - P1.4.1: Implement global search functionality across organizations, contacts, and interactions.
      - P1.4.2: Provide advanced filtering options on list views (e.g., multi-select for priority, segment).

### Phase 4: Data Migration & Polish (Weeks 7-8)
   - **M1.1: Excel Data Import**
      - M1.1.1: Develop functionality to import data from .xlsx and .csv files for:
         - Organizations.
         - Contacts.
         - Historical Interactions.
      - M1.1.2: Implement data mapping UI for users to match Excel columns to CRM fields.
      - M1.1.3: Provide comprehensive data validation and error reporting during import.
      - M1.1.4: Ensure account manager assignments and historical interactions are preserved.
   - **M1.2: User Acceptance Testing (UAT)**
      - M1.2.1: Conduct UAT sessions with the 4 sales representatives.
      - M1.2.2: Gather feedback and identify bugs or usability issues.
   - **M1.3: Final UI/UX Polish & Bug Fixing**
      - M1.3.1: Address feedback from UAT.
      - M1.3.2: Perform thorough cross-browser/device testing, focusing on iPad Safari.
      - M1.3.3: Optimize performance and responsiveness.
   - **M1.4: Documentation**
      - M1.4.1: Create a user guide for sales representatives.
      - M1.4.2: Create an admin guide for system settings and data management.

## 3. Technical Requirements
   - **Frontend:** Next.js 15, TypeScript, React, shadcn/ui, Tremor charts.
   - **Backend:** Next.js API Routes / Server Actions, TypeScript.
   - **Database:** Azure SQL Database (Basic Tier), Prisma ORM (SQL Server provider).
   - **Authentication:** Auth.js (Email/Password).
   - **Deployment:** Azure App Service (Node.js runtime).
   - **CI/CD:** GitHub Actions.
   - **Testing:** Jest, React Testing Library for unit/integration tests. Cypress for E2E (optional, if time permits).

## 4. Non-Functional Requirements
   - **Performance:** Fast page loads and interactions, especially on iPads over potentially variable network conditions.
   - **Usability:** Intuitive and easy-to-use interface, optimized for touch input with minimum 44px touch targets. Consistent UI/UX based on NextCRM and shadcn/ui.
   - **Security:** Secure authentication, protection against common web vulnerabilities (OWASP Top 10). Data encrypted in transit and at rest (Azure SQL defaults).
   - **Scalability:** System should handle data for hundreds of organizations, thousands of contacts and interactions without degradation.
   - **Maintainability:** Codebase should be clean, well-structured, commented, and follow TypeScript best practices.
   - **Budget Adherence:** Azure hosting costs must remain under $20/month (target $18/month).

## 5. Success Metrics
   - **Adoption:** All 4 sales representatives actively using the CRM daily.
   - **Efficiency:** 50% reduction in time spent on data entry compared to the Excel system.
   - **Reporting Speed:** 80% faster generation of sales and activity reports.
   - **Data Integrity:** Successful migration of 100% of critical data from the Excel system.
   - **User Satisfaction:** Positive feedback from sales representatives regarding ease of use and functionality, especially on iPads.
   - **Budget Compliance:** Azure costs consistently meet the <$20/month target.
